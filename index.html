<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="resource/css/style.css">
    <link rel="stylesheet" href="resource/css/responsive.css">
    <script type="text/javascript" src="resource/js/jquery.js"></script>
    <script src="resource/js/jquery-3.5.1.min.js"></script>
    <title>CoffeeBean</title>
</head>
<script>
    $(document).ready(function() {
        run();
    });
    function run(){
        // is IOS or is AOS
        if(isAndroid()) {
            location.href = "Intent://purple_aos#Intent;scheme=mypurpleorder;package=com.coffeebeankorea.purpleorder;end";
        } else if(isIos()) {
            // var url = "coffeebeanapp://";
            // setTimeout(function() {
            //     location.href="https://itunes.apple.com/app/id1482718354";
	        // }, 1000);
         	// location.href = url;

             $.ajax({
                 type: 'get'
                 , url: 'coffeebeanapp://'
                 , success: function(data) {
                 }
                 , error: function(e) {
                    setTimeout(function() {
                        location.href="https://itunes.apple.com/app/id1482718354";
	                }, 1000);
                 }
             });
        } else {
            console.log("pc");
        }
    }

    /**
    * 디바이스 타입 검사
    * @return {string} Os String
    */
    function deviceType() {
	    let device= "";
	    let userAgent = navigator.userAgent || navigator.vendor || window.opera;
	    if(userAgent.match(/iPad/i) || userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {
	        device= 'ios';
	    } else if( userAgent.match(/Android/i)) {
	        device= 'android';
        } else {
		    device= 'unknown';
	    }   
	    return device;
    }

    /**
    * 접속 OS Android 여부 검사
    * @return {boolean}
    */
    function isAndroid() {
        let type = deviceType();
	    if(type != null && type === 'android') {
		    return true;
	    }
	    return false;
    }

    /**
    * 접속 OS iOS 여부 검사
    * @return {boolean}
    */
    function isIos() {
	    let type = deviceType();
	    if(type != null && type === 'ios') {
		    return true;
	    }
	    return false;
    }
</script>
<body>
    <div class="container">
        <div class="logo" >
            <img src="resource/img/coffeebean_logo.png" alt="" onclick="run()" />
        </div>
        <div class="name">
            <p>커피빈</p>
        </div>
        <div class="store_link">
            <span class="ios">
                <img src="resource/img/ios_btn.png" alt="" onclick="run()" />
            </span>
            <span class="android">
                <img src="resource/img/android_btn.png" alt="" onclick="run()" />
            </span>
        </div>
    </div>
</body>
</html>